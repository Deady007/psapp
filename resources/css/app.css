@import "tailwindcss";
@import "./tokens.css";
@import "./themes/glass.css";
@import "./themes/softui.css";
@import "./themes/terminalwm.css";
@import "./themes/quickx.css";
@import "./themes/custom.css";
@import "./theme-light.css";
@import "./theme-dark.css";
@import "./landing.css";

@plugin "@tailwindcss/forms";
@source "../views/**/*.blade.php";
@source "../js/**/*.js";
@source "../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php";

@theme {
    --font-sans: "JetBrains Mono", "Share Tech Mono", monospace;
    --font-display: "JetBrains Mono", "Share Tech Mono", monospace;

    --color-ember-dark: #0b1b12;
    --color-ember: #00c36a;
    --color-ember-bright: #34d399;
    --color-gold: #f6c453;

    --animate-reveal: reveal 0.7s ease-out both;
    --animate-rise: rise 0.85s ease-out both;
    --animate-float: float 9s ease-in-out infinite;
    --animate-pan-slow: pan-slow 26s ease-in-out infinite;
    --animate-pulse-soft: pulse-soft 4s ease-in-out infinite;
    --animate-sheen: sheen 1.2s ease-out;
}

@layer base {
    body {
        font-family: var(--font-sans);
        font-size: var(--text-base);
        line-height: var(--leading-base);
        color: var(--text-primary);
        background: var(--bg-app);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: var(--font-display);
        font-weight: var(--weight-bold);
        color: var(--text-primary);
        margin-bottom: var(--space-3);
    }

    h1 {
        font-size: var(--text-4xl);
        line-height: var(--leading-tight);
    }

    h2 {
        font-size: var(--text-3xl);
        line-height: var(--leading-tight);
    }

    h3 {
        font-size: var(--text-2xl);
        line-height: var(--leading-snug);
    }

    h4 {
        font-size: var(--text-xl);
        line-height: var(--leading-snug);
    }

    h5 {
        font-size: var(--text-lg);
        line-height: var(--leading-base);
    }

    h6 {
        font-size: var(--text-base);
        line-height: var(--leading-base);
        font-weight: var(--weight-semibold);
    }

    p {
        font-size: var(--text-base);
        line-height: var(--leading-base);
        color: var(--text-secondary);
        margin-bottom: var(--space-4);
    }

    small,
    .small,
    .text-muted {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-muted) !important;
    }

    a {
        color: var(--primary);
        text-decoration: none;
        transition: color var(--motion-fast) var(--ease-standard);
    }

    a:hover,
    a:focus {
        color: var(--primary-hover);
        text-decoration: underline;
    }

    label,
    .form-label {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-secondary);
        margin-bottom: var(--space-2);
        font-weight: var(--weight-medium);
    }

    .form-control,
    .form-select {
        background: var(--control-bg);
        color: var(--control-text);
        border: 1px solid var(--control-border);
        border-radius: var(--control-radius);
        padding: var(--space-3) var(--space-4);
        min-height: var(--control-height);
        line-height: var(--leading-base);
        box-shadow: var(--shadow-inset);
    }

    .form-control::placeholder {
        color: var(--control-placeholder);
    }

    .form-control:focus,
    .form-select:focus {
        border-color: var(--control-focus-border);
        box-shadow: var(--control-focus-ring);
        outline: none;
    }

    .form-control:disabled,
    .form-select:disabled {
        background: var(--disabled-bg);
        color: var(--disabled-text);
        border-color: var(--disabled-border);
        opacity: var(--disabled-opacity);
        cursor: not-allowed;
    }

    .form-text {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-muted);
        margin-top: var(--space-2);
    }

    .btn {
        border-radius: var(--radius-md);
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        padding: var(--space-3) var(--space-4);
        font-weight: var(--weight-semibold);
        box-shadow: var(--shadow-xs);
        transition: background-color var(--motion-base) var(--ease-standard), color var(--motion-base) var(--ease-standard), box-shadow var(--motion-base) var(--ease-standard), transform var(--motion-base) var(--ease-standard);
    }

    .btn:hover,
    .btn:focus {
        box-shadow: var(--shadow-sm);
        transform: translateY(-1px);
    }

    .btn:focus-visible {
        outline: var(--focus-ring-width) solid var(--focus-ring-color);
        outline-offset: var(--focus-ring-offset);
        box-shadow: var(--shadow-sm);
    }

    .btn:active {
        box-shadow: var(--shadow-pressed);
        transform: translateY(0);
    }

    .btn:disabled,
    .btn[disabled] {
        cursor: not-allowed;
        box-shadow: none;
        opacity: var(--disabled-opacity);
        transform: none;
    }

    .btn-primary {
        background: var(--primary-soft);
        border-color: color-mix(in srgb, var(--primary) 45%, var(--border-subtle));
        color: var(--primary);
    }

    .btn-primary:hover,
    .btn-primary:focus {
        background: color-mix(in srgb, var(--primary) 18%, var(--bg-elevated));
        color: var(--primary-hover);
    }

    .btn-outline-secondary,
    .btn-outline-primary,
    .btn-outline-info,
    .btn-outline-success,
    .btn-outline-warning,
    .btn-outline-danger {
        color: var(--text-secondary);
        border-color: var(--border-subtle);
        background: transparent;
    }

    .btn-outline-secondary:hover,
    .btn-outline-primary:hover,
    .btn-outline-info:hover,
    .btn-outline-success:hover,
    .btn-outline-warning:hover,
    .btn-outline-danger:hover {
        background: var(--primary-soft);
        color: var(--primary);
        border-color: color-mix(in srgb, var(--primary) 35%, var(--border-subtle));
    }

    .input-group-text {
        background: var(--control-bg);
        color: var(--text-muted);
        border: 1px solid var(--control-border);
        border-radius: var(--control-radius);
        padding: var(--space-3) var(--space-4);
    }

    .card {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: var(--card-radius);
        box-shadow: var(--card-shadow);
        color: var(--text-primary);
        transition: box-shadow var(--motion-base) var(--ease-standard), transform var(--motion-base) var(--ease-standard), border-color var(--motion-base) var(--ease-standard);
    }

    .card:hover {
        transform: translateY(-1px);
        box-shadow: var(--shadow-lg);
        border-color: color-mix(in srgb, var(--primary) 20%, var(--card-border));
    }

    .card-header {
        border-bottom: 1px solid var(--border-subtle);
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        font-weight: var(--weight-semibold);
        padding: var(--space-4) var(--space-5);
    }

    .card-title {
        font-size: var(--text-lg);
        line-height: var(--leading-base);
        margin: 0;
    }

    .card-body {
        padding: var(--space-5);
    }

    .card-footer {
        border-top: 1px solid var(--border-subtle);
        padding: var(--space-4) var(--space-5);
    }

    .modal-content {
        background: var(--modal-bg);
        border-radius: var(--modal-radius);
        box-shadow: var(--modal-shadow);
        border: 1px solid var(--border-subtle);
        color: var(--text-primary);
    }

    .modal-header,
    .modal-footer {
        border-color: var(--border-subtle);
        padding: var(--space-4) var(--space-5);
    }

    .modal-backdrop.show {
        background: var(--modal-backdrop);
    }

    .modal.fade .modal-dialog {
        transform: translateY(12px);
        transition: transform var(--motion-slow) var(--ease-emphasized), opacity var(--motion-slow) var(--ease-emphasized);
    }

    .modal.show .modal-dialog {
        transform: translateY(0);
        opacity: 1;
    }

    .table th,
    .table td {
        padding: var(--space-3) var(--space-4);
        vertical-align: middle;
        border-color: var(--table-border);
    }

    .table thead th {
        background: var(--table-header-bg);
        color: var(--table-header-text);
        font-size: var(--text-sm);
        font-weight: var(--weight-semibold);
        line-height: var(--leading-base);
    }

    .table-hover tbody tr:hover {
        background: var(--table-row-hover);
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background: var(--table-row-zebra);
    }

    .table tbody tr {
        transition: background-color var(--motion-fast) var(--ease-standard), box-shadow var(--motion-fast) var(--ease-standard);
    }

    .info-box .info-box-text {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-muted);
        margin-bottom: var(--space-1);
    }

    .info-box .info-box-number {
        font-size: var(--text-xl);
        line-height: var(--leading-snug);
        font-weight: var(--weight-semibold);
        color: var(--text-primary);
    }

    .small-box .inner h3 {
        font-size: var(--text-3xl);
        line-height: var(--leading-tight);
        font-weight: var(--weight-semibold);
        margin: 0 0 var(--space-2);
    }

    .small-box .inner h5 {
        font-size: var(--text-base);
        line-height: var(--leading-base);
        color: var(--text-secondary);
        margin: 0;
    }

    .main-header {
        background: var(--nav-topnav-bg);
        border-bottom: 1px solid var(--border-subtle);
        min-height: calc(var(--control-height) + var(--space-2));
        padding: 0 var(--space-5);
    }

    .main-header .navbar-brand {
        font-size: var(--text-base);
        line-height: var(--leading-base);
        padding: var(--space-3) var(--space-4);
        color: var(--nav-topnav-text);
    }

    .main-header .navbar-nav .nav-link {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        padding: var(--space-3) var(--space-4);
        color: var(--nav-topnav-text);
        border-radius: var(--radius-md);
    }

    .main-header .navbar-nav .nav-link:hover,
    .main-header .navbar-nav .nav-link:focus {
        background: var(--primary-soft);
        color: var(--primary);
    }

    .main-header .navbar-nav .nav-link:focus-visible {
        outline: var(--focus-ring-width) solid var(--focus-ring-color);
        outline-offset: var(--focus-ring-offset);
    }

    .main-sidebar {
        background: var(--nav-sidebar-bg);
        border-right: 1px solid var(--border-subtle);
    }

    .brand-link {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-4);
        border-bottom: 1px solid var(--border-subtle);
        background: transparent;
        color: var(--text-primary);
    }

    .brand-link .brand-text {
        font-size: var(--text-lg);
        line-height: var(--leading-base);
        font-weight: var(--weight-semibold);
        color: var(--text-primary);
    }

    .nav-sidebar .nav-link {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        padding: var(--space-3) var(--space-4);
        color: var(--nav-sidebar-text);
        border-radius: var(--radius-md);
        margin: 0 var(--space-2) var(--space-1);
    }

    .nav-sidebar .nav-link:hover {
        background: color-mix(in srgb, var(--primary) 10%, transparent);
        color: var(--primary);
    }

    .nav-sidebar .nav-link:focus-visible,
    .brand-link:focus-visible {
        outline: var(--focus-ring-width) solid var(--focus-ring-color);
        outline-offset: var(--focus-ring-offset);
    }

    .nav-sidebar .nav-header {
        font-size: var(--text-xs);
        line-height: var(--leading-base);
        color: var(--text-muted);
        padding: var(--space-3) var(--space-4) var(--space-2);
        margin: var(--space-2) var(--space-2) var(--space-1);
        letter-spacing: 0.08em;
        text-transform: uppercase;
    }

    .nav-sidebar .nav-link.active {
        background: var(--nav-sidebar-active-bg);
        color: var(--nav-sidebar-active-text);
        box-shadow: inset 3px 0 0 var(--nav-active-indicator);
    }

    .content-wrapper,
    .content-header,
    .content {
        background: var(--bg-app);
    }

    .content-header > .container,
    .content-header > .container-fluid,
    .content > .container,
    .content > .container-fluid {
        padding: var(--space-5);
    }

    .content-header h1 {
        margin: 0;
    }

    @media (max-width: 767.98px) {
        .main-header {
            padding: 0 var(--space-3);
        }

        .main-header .navbar-nav .nav-link {
            padding: var(--space-2) var(--space-3);
        }

        .content-header > .container,
        .content-header > .container-fluid,
        .content > .container,
        .content > .container-fluid {
            padding: var(--space-4);
        }
    }

    .badge {
        border-radius: var(--radius-pill);
        font-size: var(--text-xs);
        line-height: var(--leading-base);
        padding: var(--space-1) var(--space-3);
        background: var(--primary-soft);
        color: var(--primary);
        border: 1px solid color-mix(in srgb, var(--primary) 35%, var(--border-subtle));
    }

    .alert {
        border-radius: var(--radius-lg);
        padding: var(--space-4);
        border: 1px solid var(--border-subtle);
        box-shadow: var(--shadow-xs);
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-primary);
        background: var(--bg-surface);
    }

    .alert-success {
        background: var(--success-soft);
        border-color: color-mix(in srgb, var(--success) 35%, var(--border-subtle));
        color: var(--success);
    }

    .alert-info {
        background: var(--info-soft);
        border-color: color-mix(in srgb, var(--info) 35%, var(--border-subtle));
        color: var(--info);
    }

    .alert-warning {
        background: var(--warning-soft);
        border-color: color-mix(in srgb, var(--warning) 35%, var(--border-subtle));
        color: var(--warning);
    }

    .alert-danger,
    .alert-error {
        background: var(--error-soft);
        border-color: color-mix(in srgb, var(--error) 35%, var(--border-subtle));
        color: var(--error);
    }

    .empty-state {
        border: 1px dashed var(--border-subtle);
        border-radius: var(--card-radius);
        padding: var(--space-6);
        text-align: center;
        color: var(--text-muted);
        background: var(--bg-surface);
    }

    .drawer-sheet {
        transition: transform var(--motion-slow) var(--ease-emphasized), box-shadow var(--motion-slow) var(--ease-emphasized);
    }

    .drawer-backdrop {
        transition: opacity var(--motion-slow) var(--ease-standard);
    }

    .empty-state h3,
    .empty-state .empty-state-title {
        font-size: var(--text-xl);
        line-height: var(--leading-snug);
        font-weight: var(--weight-semibold);
        color: var(--text-primary);
        margin-bottom: var(--space-2);
    }

    .empty-state p,
    .empty-state .empty-state-text {
        font-size: var(--text-sm);
        line-height: var(--leading-base);
        color: var(--text-muted);
        margin-bottom: 0;
    }

    .modal,
    .drawer-backdrop {
        transition: opacity var(--motion-slow) var(--ease-standard);
    }

    .skeleton {
        position: relative;
        display: block;
        overflow: hidden;
        background: color-mix(in srgb, var(--bg-surface-2) 80%, var(--bg-app));
        border-radius: var(--radius-md);
        min-height: 1rem;
        color: transparent;
        pointer-events: none;
    }

    .skeleton::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, transparent 0%, color-mix(in srgb, var(--bg-surface-2) 40%, var(--bg-elevated)) 45%, transparent 70%);
        animation: skeleton-shimmer 1.4s var(--ease-standard) infinite;
        opacity: 0.9;
    }

    .skeleton-text {
        height: 0.75rem;
        border-radius: var(--radius-pill);
        margin-bottom: var(--space-2);
    }

    .skeleton-text:last-child {
        margin-bottom: 0;
    }

    .skeleton-avatar {
        width: 2.75rem;
        height: 2.75rem;
        border-radius: 999px;
    }

    .skeleton-rect {
        border-radius: var(--radius-lg);
    }

    .loading-overlay {
        position: absolute;
        inset: 0;
        background: color-mix(in srgb, var(--bg-surface) 70%, transparent);
        backdrop-filter: blur(calc(var(--surface-blur) / 2));
        display: grid;
        place-items: center;
        border-radius: var(--card-radius);
        z-index: 10;
    }

    .app-setup-panel.hidden {
        display: none;
    }

    .app-setup-panel {
        position: fixed;
        inset: 0;
        z-index: 1050;
    }

    .app-setup-overlay {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(6px);
    }

    .app-setup-drawer {
        position: relative;
        margin-left: auto;
        max-width: 24rem;
        width: 100%;
        height: 100%;
        background: var(--card-bg);
        border-left: 1px solid var(--card-border);
        box-shadow: var(--shadow-lg);
        padding: var(--space-6);
        display: flex;
        flex-direction: column;
        gap: var(--space-4);
        overflow-y: auto;
    }

    .app-setup-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--space-3);
    }

    .app-setup-section {
        border: 1px solid var(--card-border);
        border-radius: var(--card-radius);
        padding: var(--space-4);
        background: var(--bg-surface);
        box-shadow: var(--shadow-xs);
    }

    .app-setup-section h4 {
        margin: 0 0 var(--space-2);
        font-size: var(--text-base);
        line-height: var(--leading-base);
    }

    .app-setup-section p {
        margin: 0 0 var(--space-3);
        font-size: var(--text-sm);
        line-height: var(--leading-base);
    }

    .app-setup-drawer .kanban-button,
    .app-setup-drawer .kanban-select {
        width: 100%;
    }

    [data-theme="glass"] .app-setup-drawer,
    [data-theme="glass"] .app-setup-section {
        background: var(--card-bg);
        border-color: var(--card-border);
        box-shadow: var(--card-shadow);
    }

    [data-theme="glass"] .app-setup-overlay {
        backdrop-filter: blur(var(--surface-blur));
    }

    [data-theme="glass"] .kanban-button {
        background: var(--control-bg);
        border-color: var(--control-border);
        color: var(--text-primary);
        box-shadow: var(--shadow-xs);
    }

    [data-theme="glass"] .kanban-button:hover {
        background: var(--primary-soft);
        color: var(--primary);
        border-color: color-mix(in srgb, var(--primary) 30%, var(--control-border));
    }

    [data-theme="glass"] .kanban-button-primary {
        background: var(--primary-soft);
        color: var(--primary);
        border-color: color-mix(in srgb, var(--primary) 45%, var(--control-border));
        box-shadow: var(--shadow-sm);
    }

    [data-theme="glass"] .kanban-button-ghost {
        background: transparent;
        border-color: var(--control-border);
        color: var(--text-primary);
    }

    [data-theme="glass"] .kanban-chip {
        background: var(--primary-soft);
        border-color: color-mix(in srgb, var(--primary) 25%, var(--border-subtle));
        color: var(--text-primary);
        box-shadow: none;
    }

    [data-theme="glass"] .kanban-chip-active {
        background: color-mix(in srgb, var(--primary) 18%, var(--bg-surface-2));
        color: var(--primary);
        border-color: color-mix(in srgb, var(--primary) 45%, var(--border-subtle));
    }

    [data-theme="glass"] .kanban-input,
    [data-theme="glass"] .kanban-select,
    [data-theme="glass"] .kanban-textarea {
        background: var(--control-bg);
        border-color: var(--control-border);
        color: var(--control-text);
        box-shadow: var(--shadow-inset);
    }

    [data-theme="glass"] .kanban-input::placeholder,
    [data-theme="glass"] .kanban-textarea::placeholder {
        color: var(--control-placeholder);
    }

    [data-theme="glass"] .soft-card,
    [data-theme="glass"] .soft-panel {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        box-shadow: var(--shadow-sm);
        color: var(--text-primary);
        backdrop-filter: blur(var(--surface-blur));
    }

    [data-theme="glass"] .soft-card::before,
    [data-theme="glass"] .soft-card::after,
    [data-theme="glass"] .soft-panel::before {
        content: none;
    }

    [data-theme="glass"] .kanban-admin [class*="border-emerald-400"] {
        border-color: var(--card-border) !important;
    }

    [data-theme="glass"] .kanban-admin [class*="bg-black/70"],
    [data-theme="glass"] .kanban-admin [class*="bg-black/80"],
    [data-theme="glass"] .kanban-admin [class*="bg-black/95"] {
        background-color: var(--card-bg) !important;
    }

    @keyframes skeleton-shimmer {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .skeleton::after {
            animation: none;
        }
    }

    :root {
        --bg: #050807;
        --surface: rgba(10, 12, 16, 0.82);
        --surface-2: rgba(255, 255, 255, 0.06);
        --text: #e6fff2;
        --muted: rgba(230, 255, 242, 0.7);
        --border: rgba(255, 255, 255, 0.08);
        --shadow: 0 18px 50px rgba(0, 0, 0, 0.55);
        --radius: 18px;
        --accent: #00ff75;
        --accent-2: #7cff9c;
        --focus: #7cff9c;
        --danger: #f87171;
        --success: #22d3a8;
        --warning: #f59e0b;
        --blur: 12px;
        --noise: rgba(255, 255, 255, 0.02);
        --glow: 0 0 22px rgba(0, 255, 117, 0.35);
    }

    html {
        scroll-behavior: smooth;
    }

    [x-cloak] {
        display: none !important;
    }

    .visually-hidden {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active,
    textarea:-webkit-autofill,
    textarea:-webkit-autofill:hover,
    textarea:-webkit-autofill:focus,
    textarea:-webkit-autofill:active,
    select:-webkit-autofill,
    select:-webkit-autofill:hover,
    select:-webkit-autofill:focus,
    select:-webkit-autofill:active {
        -webkit-text-fill-color: #00ff75 !important;
        color: #00ff75 !important;
        caret-color: #00ff75 !important;
        box-shadow: 0 0 0 1000px #000000 inset !important;
        -webkit-box-shadow: 0 0 0 1000px #000000 inset !important;
        transition: background-color 9999s ease-in-out 0s;
    }

    input:-moz-autofill,
    textarea:-moz-autofill,
    select:-moz-autofill {
        box-shadow: 0 0 0 1000px #000000 inset !important;
        -moz-text-fill-color: #00ff75 !important;
        color: #00ff75 !important;
        caret-color: #00ff75 !important;
    }

    body.kanban-admin {
        font-family: var(--jarvis-font-mono);
        letter-spacing: 0.04em;
        color: var(--text);
    }

    body.kanban-admin h1,
    body.kanban-admin h2,
    body.kanban-admin h3,
    body.kanban-admin h4,
    body.kanban-admin h5,
    body.kanban-admin h6 {
        font-family: var(--jarvis-font-display);
        letter-spacing: 0.08em;
    }

    body.kanban-admin::before,
    body.kanban-admin::after {
        content: none;
        display: none;
    }

    body.landing-page {
        overflow-x: hidden;
    }

    body.kanban-admin .content-wrapper,
    body.kanban-admin .content-header,
    body.kanban-admin .content {
        background-color: color-mix(in srgb, var(--surface) 65%, #0b0f15 35%);
    }
}

@layer components {
    .app-shell {
        position: relative;
        min-height: 100vh;
        isolation: isolate;
        overflow: hidden;
        z-index: 1;
        background:
            radial-gradient(circle at 15% 15%, var(--custom-app-radial-1, rgba(0, 255, 117, 0.18)), transparent 45%),
            radial-gradient(circle at 82% 8%, var(--custom-app-radial-2, rgba(124, 255, 156, 0.12)), transparent 45%),
            radial-gradient(circle at 50% 85%, var(--custom-app-radial-3, rgba(0, 255, 117, 0.12)), transparent 50%),
            linear-gradient(140deg, var(--bg, #000000) 0%, color-mix(in srgb, var(--bg, #000000) 75%, #020a05) 50%, var(--bg, #000000) 100%);
    }

    .app-shell::before {
        content: '';
        position: absolute;
        inset: -20%;
        background:
            radial-gradient(circle at 20% 20%, var(--custom-app-before-1, rgba(0, 255, 117, 0.25)), transparent 45%),
            radial-gradient(circle at 80% 30%, var(--custom-app-before-2, rgba(124, 255, 156, 0.2)), transparent 50%),
            radial-gradient(circle at 45% 80%, var(--custom-app-before-3, rgba(0, 255, 117, 0.18)), transparent 55%);
        filter: blur(40px);
        opacity: 0.9;
        animation: pan-slow 26s ease-in-out infinite;
        pointer-events: none;
    }

    .app-shell::after {
        content: '';
        position: absolute;
        inset: 0;
        background-image: linear-gradient(var(--custom-grid-color, color-mix(in srgb, var(--text) 12%, transparent)) 1px, transparent 1px);
        background-size: 100% 3px;
        opacity: var(--custom-grid-opacity, 0.25);
        mix-blend-mode: screen;
        pointer-events: none;
    }

    .app-shell > * {
        position: relative;
        z-index: 1;
    }

    .terminal-earth {
        position: fixed;
        top: 50%;
        right: -8vw;
        transform: translateY(-50%);
        pointer-events: none;
        opacity: calc(var(--custom-earth-visible, 1) * var(--custom-earth-opacity, 0.6));
        mix-blend-mode: screen;
        filter: drop-shadow(0 0 24px color-mix(in srgb, var(--custom-earth-color, var(--accent)) 25%, transparent));
        z-index: 0;
        transform: translateY(-50%) scale(var(--custom-earth-scale, 1));
    }

    .particles-canvas {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        opacity: var(--custom-particles-opacity, 0.55);
    }

    .particles-control {
        position: fixed;
        bottom: 1.5rem;
        right: 1.5rem;
        z-index: 50;
        display: inline-flex;
        align-items: center;
        gap: 0.6rem;
        padding: 0.5rem 0.9rem;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: color-mix(in srgb, var(--surface) 80%, transparent);
        box-shadow: var(--shadow);
        backdrop-filter: blur(var(--blur));
        color: var(--text);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
    }

    .particles-control select {
        background: transparent;
        border: none;
        color: inherit;
        font: inherit;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        padding-right: 0.9rem;
        appearance: none;
        outline: none;
        cursor: pointer;
    }

    .particles-control::after {
        content: '';
        width: 0.35rem;
        height: 0.35rem;
        border-right: 1px solid currentColor;
        border-bottom: 1px solid currentColor;
        transform: rotate(45deg);
        opacity: 0.65;
        margin-top: -0.1rem;
    }

    .soft-panel {
        @apply relative overflow-hidden rounded-3xl bg-black/70 ring-1 ring-emerald-400/25 backdrop-blur-xl;
        box-shadow: var(--shadow-elevated);
        transition: transform var(--motion-base) var(--ease-standard), box-shadow var(--motion-base) var(--ease-standard), border-color var(--motion-base) var(--ease-standard);
    }

    .soft-panel::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(0, 255, 117, 0.12), transparent 40%, rgba(124, 255, 156, 0.1));
        opacity: 0.8;
        pointer-events: none;
    }

    .soft-panel > * {
        position: relative;
        z-index: 1;
    }

    .soft-panel:hover {
        transform: translateY(-2px);
        box-shadow: var(--glow);
        border-color: color-mix(in srgb, var(--border) 70%, var(--accent) 30%);
    }

    .soft-card {
        @apply relative overflow-hidden rounded-3xl bg-black/55 ring-1 ring-emerald-400/20 backdrop-blur-2xl;
        box-shadow: var(--shadow-ember-soft);
        transition: transform var(--motion-base) var(--ease-standard), box-shadow var(--motion-base) var(--ease-standard), border-color var(--motion-base) var(--ease-standard);
    }

    .soft-card::before {
        content: '';
        position: absolute;
        inset: -35% 10% auto auto;
        width: 65%;
        aspect-ratio: 1 / 1;
        background: radial-gradient(circle, rgba(0, 255, 117, 0.25), transparent 55%);
        filter: blur(30px);
        opacity: 0.8;
        pointer-events: none;
        animation: pulse-soft 6s ease-in-out infinite;
    }

    .soft-card::after {
        content: '';
        position: absolute;
        inset: auto auto -35% -10%;
        width: 70%;
        aspect-ratio: 1 / 1;
        background: radial-gradient(circle, rgba(124, 255, 156, 0.2), transparent 55%);
        filter: blur(36px);
        opacity: 0.75;
        pointer-events: none;
    }

    .soft-card > * {
        position: relative;
        z-index: 1;
    }

    .soft-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--glow);
        border-color: color-mix(in srgb, var(--border) 70%, var(--accent-2) 30%);
    }

    .settings-stack .soft-card {
        background: color-mix(in srgb, var(--card-bg) 92%, #000000 8%);
        border: 1px solid color-mix(in srgb, var(--border) 70%, transparent);
        box-shadow: var(--shadow-md);
    }

    .settings-stack .soft-card::before,
    .settings-stack .soft-card::after {
        content: none;
    }

    .nav-sidebar .settings-nav,
    .nav-sidebar .settings-nav-header {
        display: none !important;
    }

    .nav-sidebar .app-nav {
        display: block;
    }

    .settings-page .nav-sidebar .settings-nav,
    .settings-page .nav-sidebar .settings-nav-header {
        display: block !important;
    }

    .nav-sidebar .admin-nav,
    .nav-sidebar .admin-nav-header {
        display: none !important;
    }

    .settings-page .nav-sidebar .admin-nav,
    .settings-page .nav-sidebar .admin-nav-header,
    .admin-page .nav-sidebar .admin-nav,
    .admin-page .nav-sidebar .admin-nav-header {
        display: block !important;
    }

    .settings-page .nav-sidebar .app-nav,
    .admin-page .nav-sidebar .app-nav {
        display: none !important;
    }

    .modal-content {
        background: color-mix(in srgb, var(--surface) 92%, transparent);
        border-radius: var(--radius);
        border: 1px solid var(--border);
        box-shadow: var(--shadow);
        backdrop-filter: blur(var(--blur, 14px));
        color: var(--text);
    }

    .modal-backdrop.show {
        backdrop-filter: blur(calc(var(--blur, 14px) / 2));
        background: color-mix(in srgb, #000000 60%, var(--surface) 40%);
    }

    .soft-cta {
        @apply relative inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-ember-dark via-ember to-ember-bright px-5 py-2 text-sm font-semibold uppercase tracking-wide text-emerald-50 shadow-lg shadow-emerald-500/40 transition-all duration-300 ease-out hover:-translate-y-0.5 hover:shadow-emerald-300/70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300/70;
    }

    .soft-cta::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(120deg, transparent 0%, rgba(124, 255, 156, 0.3) 45%, transparent 70%);
        transform: translateX(-120%);
        opacity: 0;
        transition: transform 0.6s ease-out, opacity 0.6s ease-out;
    }

    .soft-cta:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 36px color-mix(in srgb, var(--accent) 45%, transparent);
    }

    .soft-cta:hover::after {
        transform: translateX(120%);
        opacity: 0.85;
    }

    .soft-badge {
        @apply inline-flex items-center gap-2 rounded-full bg-emerald-400/10 px-3 py-1 text-xs font-semibold text-emerald-100 ring-1 ring-emerald-300/40 shadow-sm;
    }

    .theme-switcher {
        position: fixed;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 50;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.45rem 0.8rem;
        border-radius: 999px;
        border: 1px solid var(--border);
        background: color-mix(in srgb, var(--surface) 80%, transparent);
        box-shadow: var(--shadow);
        backdrop-filter: blur(var(--blur));
        color: var(--text);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.2em;
    }

    .theme-switcher select {
        background: transparent;
        border: none;
        color: inherit;
        font: inherit;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        padding-right: 0.9rem;
        appearance: none;
        outline: none;
        cursor: pointer;
    }

    .theme-switcher::after {
        content: '';
        width: 0.35rem;
        height: 0.35rem;
        border-right: 1px solid currentColor;
        border-bottom: 1px solid currentColor;
        transform: rotate(45deg);
        opacity: 0.65;
        margin-top: -0.1rem;
    }

    .kanban-input {
        @apply w-full rounded-2xl border border-emerald-400/30 bg-black/70 px-3 py-2 text-xs text-emerald-100 placeholder-emerald-300/60 shadow-[inset_0_0_0_1px_rgba(0,255,117,0.08)] focus:border-emerald-300/70 focus:ring-1 focus:ring-emerald-300/60;
    }

    .kanban-textarea {
        @apply w-full rounded-2xl border border-emerald-400/30 bg-black/70 px-3 py-2 text-xs text-emerald-100 placeholder-emerald-300/60 focus:border-emerald-300/70 focus:ring-1 focus:ring-emerald-300/60;
    }

    .kanban-select {
        @apply w-full rounded-2xl border border-emerald-400/30 bg-black/70 px-3 py-2 text-xs text-emerald-100 focus:border-emerald-300/70 focus:ring-1 focus:ring-emerald-300/60;
    }

    .kanban-chip {
        @apply inline-flex items-center gap-2 rounded-full border border-emerald-400/30 bg-black/70 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-emerald-200 transition hover:border-emerald-300/70 hover:text-emerald-100;
    }

    .kanban-chip-active {
        @apply border-emerald-300/80 bg-emerald-400/15 text-emerald-100 shadow-[0_0_14px_rgba(0,255,117,0.35)];
    }

    .kanban-button {
        @apply inline-flex items-center justify-center gap-2 rounded-full border border-emerald-400/35 bg-black/70 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-100 transition hover:border-emerald-300/70 hover:text-emerald-200;
    }

    .kanban-button-primary {
        @apply border-emerald-300/80 bg-emerald-400/15 text-emerald-100 shadow-[0_0_16px_rgba(0,255,117,0.35)];
    }

    .kanban-button-ghost {
        @apply border-transparent bg-black/40 text-emerald-200 hover:border-emerald-400/40 hover:text-emerald-100;
    }

    .soft-glow {
        box-shadow: var(--glow);
    }

    .float-slow {
        animation: float 9s ease-in-out infinite;
    }

    .choices__inner {
        border-radius: 0.85rem;
        border-color: rgba(0, 255, 117, 0.35);
        min-height: 2.85rem;
        padding: 0.6rem 0.9rem;
        background: rgba(0, 0, 0, 0.75);
        color: #d7ffe4;
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.4);
    }

    .choices__list--single .choices__item {
        color: var(--text);
        font-weight: 600;
    }

    .choices__list--dropdown {
        border-radius: 1rem;
        background: rgba(0, 0, 0, 0.92);
        border-color: rgba(0, 255, 117, 0.25);
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.5);
        color: #d7ffe4;
    }

    .choices__list--dropdown .choices__item--selectable.is-highlighted {
        background: rgba(0, 255, 117, 0.12);
    }

    .flatpickr-input {
        background-color: rgba(0, 0, 0, 0.8);
        cursor: pointer;
        border-radius: 0.85rem;
        border-color: rgba(0, 255, 117, 0.35);
        color: #d7ffe4;
        box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.5);
    }

    :is(.soft-panel, .soft-card) .choices__inner,
    :is(.soft-panel, .soft-card) .flatpickr-input {
        background: rgba(0, 0, 0, 0.8);
        color: #d7ffe4;
        border-color: rgba(0, 255, 117, 0.35);
        box-shadow: var(--shadow-ember-soft);
    }

    :is(.soft-panel, .soft-card) .choices__list--dropdown {
        background: rgba(0, 0, 0, 0.95);
        border-color: rgba(0, 255, 117, 0.25);
        color: #d7ffe4;
        box-shadow: 0 18px 45px rgba(0, 0, 0, 0.6);
    }

    :is(.soft-panel, .soft-card) .choices__list--single .choices__item,
    :is(.soft-panel, .soft-card) .choices__list--dropdown .choices__item--selectable {
        color: var(--text);
    }
}

@layer utilities {
    .reveal-delay-1 {
        animation-delay: 0.08s;
    }

    .reveal-delay-2 {
        animation-delay: 0.16s;
    }

    .reveal-delay-3 {
        animation-delay: 0.24s;
    }

    .reveal-delay-4 {
        animation-delay: 0.32s;
    }

    .reveal-delay-5 {
        animation-delay: 0.4s;
    }

    .line-clamp-2 {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
    }
}

@media (max-width: 767.98px) {
    .terminal-earth {
        right: -20vw;
        opacity: 0.4;
    }

    .theme-switcher {
        top: 1rem;
        right: 1rem;
        letter-spacing: 0.16em;
    }
}

@media (prefers-reduced-motion: reduce) {
    .app-shell::before,
    .soft-card::before,
    .float-slow {
        animation: none;
    }

    .terminal-earth {
        opacity: 0.35;
        filter: none;
    }
}

@keyframes reveal {
    0% {
        opacity: 0;
        transform: translateY(12px) scale(0.98);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes rise {
    0% {
        opacity: 0;
        transform: translateY(18px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes float {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-8px);
    }
}

@keyframes pan-slow {
    0%, 100% {
        transform: translate3d(0, 0, 0) scale(1);
    }
    50% {
        transform: translate3d(3%, -2%, 0) scale(1.05);
    }
}

@keyframes pulse-soft {
    0%, 100% {
        opacity: 0.45;
    }
    50% {
        opacity: 0.8;
    }
}

@keyframes sheen {
    0% {
        transform: translateX(-120%);
        opacity: 0;
    }
    40% {
        opacity: 0.65;
    }
    100% {
        transform: translateX(120%);
        opacity: 0;
    }
}
